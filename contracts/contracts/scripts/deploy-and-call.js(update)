/* Deploy RoyaltySplitter + LexWingTest on Base Sepolia via ethers v6
   Run from browser-solidity or Remix → "Deploy & Run" → "JavaScript VM" → paste whole file */
import { ethers } from "https://cdn.skypack.dev/ethers@6.9.0";

const RPC = "https://sepolia.base.org";
const PRIV = "<YOUR_TESTNET_PRIVATE_KEY>"; // 0x... (no funds at risk)

const SPLITTER_ABI = `[{"inputs":[],"name":"totalDecisions","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalRoyaltyWei","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_kernelId","type":"bytes32"}],"name":"recordDecision","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"DecisionPaid","outputs":[{"internalType":"bytes32","name":"kernelId","type":"bytes32"},{"internalType":"uint256","name":"feeWei","type":"uint256"}],"stateMutability":"nonpayable","type":"event"}]`;

const LEX_ABI = `[{"inputs":[{"internalType":"bytes32","name":"id","type":"bytes32"},{"internalType":"uint8","name":"score","type":"uint8"},{"internalType":"uint64","name":"nanos","type":"uint64"}],"name":"decide","outputs":[{"internalType":"enum LexWingTest.Decision","name":"decision_","type":"uint8"},{"internalType":"uint64","name":"seq_","type":"uint64"}],"stateMutability":"payable","type":"function"}]`;

async function run() {
  const provider = new ethers.JsonRpcProvider(RPC);
  const wallet = new ethers.Wallet(PRIV, provider);

  // 1. Deploy RoyaltySplitter
  const splitterFactory = new ethers.ContractFactory(SPLITTER_ABI, "0x608060405234801561001057600080fd5b50600436106100415760003560e01c80632a5064be146100465780635c94028f14610052578063c8e9f3fd1461006e575b600080fd5b61004e61008a565b005b61005c61009a565b60405161006991906100e0565b60405180910390f35b61007a6100a0565b60405161008791906100e0565b60405180910390f35b600080549050600160008082825401925050819055503373ffffffffffffffffffffffffffffffffffffffff166000829003909103819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003819003
